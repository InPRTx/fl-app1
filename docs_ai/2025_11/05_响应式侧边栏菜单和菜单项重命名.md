# å“åº”å¼ä¾§è¾¹æ èœå•å’Œèœå•é¡¹é‡å‘½å

## æ›´æ–°æ—¥æœŸ

2025å¹´11æœˆ5æ—¥

## ä¿®æ”¹å†…å®¹

### 1. åˆ›å»ºå“åº”å¼å¸ƒå±€ç»„ä»¶

#### æ–°å¢æ–‡ä»¶

- `/lib/widgets/simple_layout_with_menu.dart`

#### åŠŸèƒ½ç‰¹ç‚¹

- **å“åº”å¼è®¾è®¡**ï¼š
    - å¤§å±å¹•ï¼ˆâ‰¥768pxï¼‰ï¼šæ˜¾ç¤º NavigationRail çŸ­ä¾§è¾¹æ ï¼ˆç±»ä¼¼ /user é¡µé¢ï¼‰
    - å°å±å¹•ï¼ˆ<768pxï¼‰ï¼šä½¿ç”¨æŠ½å±‰å¼ NavigationDrawer
- **ç»Ÿä¸€æ ·å¼**ï¼šä¸ç”¨æˆ·ä¸­å¿ƒé¡µé¢ä¿æŒä¸€è‡´çš„å¯¼èˆªä½“éªŒ
- **è‡ªåŠ¨è·¯ç”±åŒ¹é…**ï¼šæ ¹æ®å½“å‰è·¯å¾„è‡ªåŠ¨é«˜äº®å¯¹åº”èœå•é¡¹
- **æ™ºèƒ½å‰ç¼€åŒ¹é…**ï¼šæ”¯æŒå­è·¯ç”±è‡ªåŠ¨è¯†åˆ«çˆ¶çº§èœå•

#### ç»„ä»¶ç»“æ„

```dart
class SimpleLayoutWithMenu extends StatelessWidget {
  // ä¸»å¸ƒå±€ç»„ä»¶ï¼Œæ”¯æŒå“åº”å¼åˆ‡æ¢
}

class SimpleNavigationRail extends StatelessWidget {
  // å¤§å±å¹•çŸ­ä¾§è¾¹æ ï¼ˆNavigationRailï¼‰
}

class SimpleNavigationDrawer extends StatelessWidget {
  // å°å±å¹•æŠ½å±‰å¼èœå•ï¼ˆNavigationDrawerï¼‰
}
```

### 2. èœå•é¡¹æ›´æ–°

#### ä¸»è¦èœå•é¡¹ï¼ˆ6ä¸ªï¼‰

| å›¾æ ‡                              | æ ‡ç­¾       | è·¯ç”±                     | è¯´æ˜              |
|---------------------------------|----------|------------------------|-----------------|
| ğŸ  Icons.home                   | **é¦–é¡µ**   | `/`                    | åº”ç”¨ä¸»é¡µï¼ˆåŸ"ä¸»é¡µ"ï¼‰     |
| ğŸ“Š Icons.dashboard              | **ç”¨æˆ·é¦–é¡µ** | `/user/dashboard`      | ç”¨æˆ·ä»ªè¡¨æ¿ï¼ˆåŸ"/user"ï¼‰ |
| ğŸ›ï¸ Icons.shopping_bag_outlined | æˆ‘çš„æœåŠ¡     | `/user/services/`      | æœåŠ¡ç®¡ç†            |
| ğŸ’° Icons.attach_money           | è´¢åŠ¡ç®¡ç†     | `/user/wallet/billing` | è´¦å•å’Œå……å€¼           |
| ğŸ§ Icons.support_agent_outlined | æŠ€æœ¯æ”¯æŒ     | `/user/tickets`        | å·¥å•å’Œå¸®åŠ©           |
| ğŸ‘¤ Icons.person_outline         | æˆ‘çš„è´¦æˆ·     | `/user/my-account`     | è´¦æˆ·è®¾ç½®            |

#### å…¶ä»–èœå•é¡¹ï¼ˆ2ä¸ªï¼‰

| å›¾æ ‡                         | æ ‡ç­¾ | è·¯ç”±          |
|----------------------------|----|-------------|
| âš™ï¸ Icons.settings_outlined | è®¾ç½® | `/settings` |
| â„¹ï¸ Icons.info_outline      | å…³äº | `/about`    |

#### å‘½åå˜æ›´

- **"ä¸»é¡µ"** â†’ **"é¦–é¡µ"**ï¼ˆæŒ‡å‘ `/`ï¼‰
- **"/user/dashboard"** â†’ **"ç”¨æˆ·é¦–é¡µ"**

### 3. é¡µé¢é›†æˆ

#### home_page.dart

âœ… ä½¿ç”¨ `SimpleLayoutWithMenu` å¸ƒå±€
âœ… è‡ªåŠ¨æ˜¾ç¤ºå“åº”å¼èœå•
âœ… æ›´æ–°æŒ‰é’®æ–‡æœ¬"å‰å¾€ä¸»é¡µ" â†’ "å‰å¾€ç”¨æˆ·é¦–é¡µ"

```dart
class MyHomePage extends StatefulWidget {
  @override
  Widget build(BuildContext context) {
    return SimpleLayoutWithMenu(
      title: widget.title,
      child: SingleChildScrollView(
        // ...content
      ),
    );
  }
}
```

#### login_page.dart

âœ… ä» `SimpleUserMenu` è¿ç§»åˆ° `SimpleLayoutWithMenu`
âœ… å¤§å±å¹•æ˜¾ç¤ºçŸ­ä¾§è¾¹æ ï¼Œå°å±å¹•æ˜¾ç¤ºæŠ½å±‰
âœ… ä¿æŒåŸæœ‰ç™»å½•è¡¨å•åŠŸèƒ½

```dart
class LoginPage extends StatefulWidget {
  @override
  Widget build(BuildContext context) {
    return SimpleLayoutWithMenu(
      title: 'ç™»å½•',
      child: Center(
        // ...login form
      ),
    );
  }
}
```

### 4. å“åº”å¼å¸ƒå±€å¯¹æ¯”

#### å°å±å¹•ï¼ˆ< 768pxï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â˜° ç™»å½•      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                 â”‚
â”‚   ç™»å½•è¡¨å•     â”‚
â”‚                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

ç‚¹å‡» â˜° æ‰“å¼€æŠ½å±‰èœå•

#### å¤§å±å¹•ï¼ˆâ‰¥ 768pxï¼‰

```
â”Œâ”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ğŸ â”‚              â”‚
â”‚ğŸ“Šâ”‚              â”‚
â”‚ğŸ›ï¸â”‚  ç™»å½•è¡¨å•   â”‚
â”‚ğŸ’°â”‚              â”‚
â”‚ğŸ§â”‚              â”‚
â”‚ğŸ‘¤â”‚              â”‚
â”‚âš™ï¸â”‚              â”‚
â”‚â„¹ï¸â”‚              â”‚
â””â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

å·¦ä¾§å›ºå®šæ˜¾ç¤º NavigationRail

## æŠ€æœ¯å®ç°

### å“åº”å¼æ–­ç‚¹

```dart

final isLargeScreen = constraints.maxWidth >= 768;
```

### å¸ƒå±€åˆ‡æ¢

```dart
Scaffold
(
drawer: isLargeScreen ? null : const SimpleNavigationDrawer(),
body: Row(
children: [
if (isLargeScreen) const SimpleNavigationRail(),
Expanded(child: child
)
,
]
,
)
,
)
```

### è·¯ç”±åŒ¹é…é€»è¾‘

```dart
int _getSelectedIndex(String currentPath) {
  for (int i = 0; i < _allMenuItems.length; i++) {
    final route = _allMenuItems[i].route;
    // å®Œå…¨åŒ¹é…
    if (route == currentPath) return i;
    // å‰ç¼€åŒ¹é…ï¼ˆæ’é™¤é¦–é¡µï¼‰
    if (route != null && route != '/' && currentPath.startsWith(route)) {
      return i;
    }
  }
  return 0;
}
```

## ç”¨æˆ·ä½“éªŒæå‡

### 1. ç»Ÿä¸€å¯¼èˆªä½“éªŒ

- æ‰€æœ‰é¡µé¢ï¼ˆé¦–é¡µã€ç™»å½•é¡µã€ç”¨æˆ·é¡µï¼‰ä½¿ç”¨ç»Ÿä¸€çš„èœå•æ ·å¼
- ä¿æŒ Material Design 3 ä¸€è‡´æ€§

### 2. å“åº”å¼é€‚é…

- ç§»åŠ¨ç«¯ï¼šèŠ‚çœå±å¹•ç©ºé—´ï¼ŒæŠ½å±‰å¼èœå•æŒ‰éœ€æ˜¾ç¤º
- æ¡Œé¢ç«¯ï¼šå›ºå®šä¾§è¾¹æ ï¼Œå¿«é€Ÿå¯¼èˆª

### 3. è§†è§‰æ¸…æ™°

- NavigationRail ä½¿ç”¨å›¾æ ‡+æ–‡å­—ï¼Œæ¸…æ™°æ˜“æ‡‚
- å½“å‰é¡µé¢é«˜äº®æ˜¾ç¤º
- åˆ†ç»„æ ‡é¢˜åŒºåˆ†ä¸»èœå•å’Œå…¶ä»–åŠŸèƒ½

### 4. æ“ä½œä¾¿æ·

- å¤§å±å¹•ï¼šå•å‡»å³å¯åˆ‡æ¢é¡µé¢
- å°å±å¹•ï¼šç‚¹å‡»èœå•é¡¹è‡ªåŠ¨å…³é—­æŠ½å±‰

## ä¸ UserLayout å¯¹æ¯”

### ç›¸ä¼¼ä¹‹å¤„

- éƒ½ä½¿ç”¨ LayoutBuilder å®ç°å“åº”å¼
- éƒ½æ”¯æŒ NavigationRailï¼ˆå¤§å±ï¼‰å’Œ Drawerï¼ˆå°å±ï¼‰
- éƒ½ä½¿ç”¨ 768px ä½œä¸ºæ–­ç‚¹

### å·®å¼‚ä¹‹å¤„

| ç‰¹æ€§    | SimpleLayoutWithMenu | UserLayout |
|-------|----------------------|------------|
| ç›®æ ‡ç”¨æˆ·  | æœªç™»å½•/å…¬å¼€é¡µé¢             | å·²ç™»å½•ç”¨æˆ·      |
| èœå•é¡¹æ•°é‡ | 8ä¸ªï¼ˆç®€åŒ–ï¼‰               | 30+ä¸ªï¼ˆå®Œæ•´ï¼‰   |
| äºŒçº§èœå•  | æ—                     | æœ‰          |
| æµ®åŠ¨èœå•  | æ—                     | æœ‰          |
| å¤æ‚åº¦   | ç®€å•                   | å¤æ‚         |

## æ–‡ä»¶æ¸…å•

### æ–°å¢æ–‡ä»¶

- `/lib/widgets/simple_layout_with_menu.dart` - å“åº”å¼å¸ƒå±€ç»„ä»¶

### ä¿®æ”¹æ–‡ä»¶

- `/lib/widgets/simple_user_menu.dart` - æ›´æ–°èœå•é¡¹åç§°
- `/lib/pages/home_page.dart` - é›†æˆå“åº”å¼å¸ƒå±€
- `/lib/pages/auth/account_login/login_page.dart` - è¿ç§»åˆ°å“åº”å¼å¸ƒå±€

## åç»­ä¼˜åŒ–å»ºè®®

1. **æ·»åŠ ç”¨æˆ·çŠ¶æ€æ£€æµ‹**
    - æœªç™»å½•æ—¶éšè—"ç”¨æˆ·é¦–é¡µ"ç­‰éœ€è¦è®¤è¯çš„èœå•é¡¹
    - å·²ç™»å½•æ—¶æ˜¾ç¤ºç”¨æˆ·å¤´åƒå’Œæ˜µç§°

2. **æ·»åŠ å¿«æ·æ“ä½œ**
    - ç™»å½•é¡µé¢ï¼šæ˜¾ç¤º"æ³¨å†Œ"å¿«æ·å…¥å£
    - å·²ç™»å½•ï¼šæ˜¾ç¤º"é€€å‡ºç™»å½•"æŒ‰é’®

3. **åŠ¨ç”»ä¼˜åŒ–**
    - èœå•åˆ‡æ¢æ—¶æ·»åŠ è¿‡æ¸¡åŠ¨ç”»
    - è·¯ç”±è·³è½¬æ—¶çš„é¡µé¢è¿‡æ¸¡æ•ˆæœ

4. **ä¸»é¢˜é€‚é…**
    - æ”¯æŒæ·±è‰²æ¨¡å¼
    - è‡ªå®šä¹‰å“ç‰Œé¢œè‰²

5. **æ— éšœç¢æ”¯æŒ**
    - æ·»åŠ  Semantics æ ‡ç­¾
    - æ”¯æŒé”®ç›˜å¯¼èˆª

## æµ‹è¯•æ£€æŸ¥æ¸…å•

- [x] é¦–é¡µæ˜¾ç¤ºå“åº”å¼èœå•
- [x] ç™»å½•é¡µæ˜¾ç¤ºå“åº”å¼èœå•
- [x] å°å±å¹•ï¼ˆ<768pxï¼‰æ˜¾ç¤ºæŠ½å±‰èœå•
- [x] å¤§å±å¹•ï¼ˆâ‰¥768pxï¼‰æ˜¾ç¤ºçŸ­ä¾§è¾¹æ 
- [x] èœå•é¡¹è·¯ç”±è·³è½¬æ­£å¸¸
- [x] å½“å‰è·¯ç”±é«˜äº®æ˜¾ç¤ºæ­£ç¡®
- [x] èœå•é¡¹æ–‡æœ¬æ›´æ–°ä¸º"é¦–é¡µ"å’Œ"ç”¨æˆ·é¦–é¡µ"
- [x] æ— ç¼–è¯‘é”™è¯¯

