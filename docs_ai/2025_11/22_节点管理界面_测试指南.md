# 节点管理界面 - 快速测试指南

## 环境准备

1. 确保已启动 Flutter 应用
2. 已通过低权限管理员账户登录
3. 有有效的 API 访问令牌

## 测试流程

### 1. 导航测试

#### 桌面端 (≥ 1100px)

```
1. 进入低权限管理后台
2. 在左侧侧边栏找到"节点管理" (Icons.cloud)
3. 点击进入 /low_admin/ss_node
✓ 应显示节点列表（DataTable 视图）
```

#### 平板端 (640px - 1100px)

```
1. 进入低权限管理后台
2. 在左侧侧边栏找到"节点管理"
3. 点击进入
✓ 应显示节点卡片网格（2列）
```

#### 手机端 (< 640px)

```
1. 进入低权限管理后台
2. 点击左上角菜单图标打开抽屉
3. 找到"节点管理"菜单项
4. 点击进入
✓ 应显示节点卡片列表（单列）
```

### 2. 节点列表测试

#### 验证国家代码显示

**桌面视图**:

```
表格列顺序检查:
ID → 节点名称 → 主机 → 端口 → 协议 → 【国家代码】← 优先级 → ...

示例行:
123 | node-hk | 123.45.67.89 | 443 | vmess | 【HK】| 60000 | ...
```

**平板/手机视图**:

```
卡片信息行检查:
节点名称
ID: 123
────────
主机: 123.45.67.89
端口: 443
协议: vmess
【国家代码: HK】← 验证这一行
倍率: 1.00
等级: 0
...
```

### 3. 搜索功能测试

```
1. 在搜索框输入节点名称、备注或 ID
   例: "hk" 或 "123"
2. 点击"搜索"按钮或按 Enter
3. 观察列表是否被过滤
✓ 应只显示匹配的节点
✓ 清空搜索框点击"刷新"后恢复完整列表
```

### 4. 新增节点测试

```
1. 点击"新增节点"按钮
2. 填写表单:
   - 节点名称: "test-node-sg"
   - 主机地址: "node.example.com"
   - 端口: 443
   - 优先级: 60000
   - 节点等级: 0
   - 倍率: 1.0
   - 协议类型: 选择 "vmess"
   - 国家/地区代码: 【必须选择】例: "SG" (新加坡)
   - 其他可选字段保持默认
3. 点击"保存"
✓ 应显示成功提示
✓ 列表应自动刷新，新节点出现
✓ 新节点的"国家代码"列应显示 "SG"
```

### 5. 编辑节点测试

```
1. 在节点列表中找到任一节点
2. 点击"编辑"按钮
3. 修改信息，特别验证:
   - 修改"国家/地区代码"（例: HK → US）
   - 修改其他字段
4. 点击"保存"
✓ 应显示成功提示
✓ 列表刷新后，国家代码应更新
```

### 6. 删除节点测试

```
1. 点击某个节点的"删除"按钮
2. 在确认对话框中点击"删除"
✓ 应显示删除成功提示
✓ 节点从列表中消失
✓ 再次刷新后，节点应确实被删除
```

### 7. 响应式测试

#### 调整浏览器窗口大小验证不同视图

```
窗口宽度 < 640px：
  ✓ 应显示单列卡片列表
  ✓ 侧边栏消失，显示菜单按钮

窗口宽度 640px - 1100px：
  ✓ 应显示两列卡片网格
  ✓ 可能仍显示菜单按钮

窗口宽度 ≥ 1100px：
  ✓ 应显示 DataTable
  ✓ 显示侧边栏导航
  ✓ 所有列都应可见（含国家代码列）
```

### 8. 下拉刷新测试

```
手机/平板端:
1. 在列表顶部从上往下拖动
2. 释放手指
✓ 应出现加载指示器
✓ 列表应更新
```

### 9. 加载状态测试

```
1. 打开节点管理页面
✓ 应显示加载圈（如果列表较大）
✓ 加载完成后列表显示

2. 点击搜索/刷新
✓ 搜索/刷新按钮应变为禁用（加载中）
✓ 加载完成后恢复可用
```

### 10. 错误处理测试

#### 网络错误

```
1. 断开网络或使用无效 API 地址
2. 进入节点管理页面
✓ 应显示错误信息和"重试"按钮
✓ 点击"重试"应重新加载
```

#### 表单验证

```
1. 点击"新增节点"
2. 不填任何信息直接点击"保存"
✓ 应显示"必填"提示
✓ 对每个必填字段都有验证提示

3. 尝试输入无效数据（如端口为非数字）
✓ 应提示错误
```

#### API 错误

```
1. 提交可能导致 API 错误的数据
✓ 应显示服务器返回的错误信息
✓ 表单应保持打开，可以重新修改
```

## 国家代码验证检查表

### 常见国家代码测试

- [ ] 中国 (CN)
- [ ] 香港 (HK)
- [ ] 新加坡 (SG)
- [ ] 日本 (JP)
- [ ] 美国 (US)
- [ ] 英国 (GB)
- [ ] 其他任意 ISO 3166-1 代码

### 验证规则

- [ ] 所有大写字母 (例: "HK", 不是 "hk")
- [ ] 恰好 2 个字母
- [ ] 在表单中可正确选择
- [ ] 在列表中正确显示
- [ ] 编辑后能正确更新

## 性能测试

```
1. 加载有 100+ 个节点的列表
✓ 应能流畅加载和显示
✓ 滚动应流畅

2. 搜索大量节点
✓ 应在合理时间内完成
```

## 浏览器/设备兼容性

测试设备:

- [ ] iOS Safari
- [ ] Android Chrome
- [ ] Desktop Chrome
- [ ] Desktop Firefox
- [ ] Desktop Safari

## 最后验收

- [ ] 所有功能正常
- [ ] 国家代码在所有视图中正确显示
- [ ] 响应式设计工作良好
- [ ] 无错误或警告
- [ ] 用户体验良好

---

**测试日期**: _____________  
**测试人员**: _____________  
**测试结果**: ☐ 通过 ☐ 有问题  
**备注**: _________________________________

