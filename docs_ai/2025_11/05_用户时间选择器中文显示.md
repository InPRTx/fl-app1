# 用户时间选择器中文显示

## 问题描述

用户在编辑用户信息时，时间选择器（DatePicker 和 TimePicker）显示的是英文界面，需要改为中文（zh_CN）显示。

## 解决方案

### 1. 添加 flutter_localizations 依赖

在 `pubspec.yaml` 中添加 `flutter_localizations` 包：

```yaml
dependencies:
  flutter:
    sdk: flutter
  flutter_localizations:
    sdk: flutter
```

### 2. 配置全局本地化支持

在 `lib/main.dart` 中：

#### 导入必要的包

```dart
import 'package:flutter_localizations/flutter_localizations.dart';
```

#### 配置 MaterialApp.router

```dart
MaterialApp.router
(
scaffoldMessengerKey: scaffoldMessengerKey,
routerConfig: router,
title: 'Flutter Demo',
localizationsDelegates: const [
GlobalMaterialLocalizations.delegate,
GlobalWidgetsLocalizations.delegate,
GlobalCupertinoLocalizations.delegate,
],
supportedLocales: const [
Locale('zh', 'CN'),
Locale('en', 'US'),
],
locale: const Locale('zh', 'CN'),
theme: ThemeData(
// ...
),
// ...
);
```

### 3. 在时间选择器中指定 locale

#### 在 `lib/pages/low_admin/widgets/editable_user_v2_info_card.dart` 中：

```dart
Future<void> _selectDateTime(String field) async {
  final currentDate = _dateTimeValues[field] ?? DateTime.now();
  final pickedDate = await showDatePicker(
    context: context,
    initialDate: currentDate,
    firstDate: DateTime(2020),
    lastDate: DateTime(2100),
    locale: const Locale('zh', 'CN'), // 添加此行
  );
  // ...
}
```

#### 在 `lib/pages/low_admin/widgets/editable_user_old_service_card.dart` 中：

```dart
Future<void> _selectDateTime(String field) async {
  final currentDate = _dateTimeValues[field] ?? DateTime.now();
  final pickedDate = await showDatePicker(
    context: context,
    initialDate: currentDate,
    firstDate: DateTime(2020),
    lastDate: DateTime(2100),
    locale: const Locale('zh', 'CN'), // 添加此行
  );
  // ...
}
```

## 修改的文件

1. `/Users/inprtx/git/hub/InPRTx/fl_app1/pubspec.yaml` - 添加 flutter_localizations 依赖
2. `/Users/inprtx/git/hub/InPRTx/fl_app1/lib/main.dart` - 配置全局本地化支持
3. `/Users/inprtx/git/hub/InPRTx/fl_app1/lib/pages/low_admin/widgets/editable_user_v2_info_card.dart` - 添加 locale 参数
4. `/Users/inprtx/git/hub/InPRTx/fl_app1/lib/pages/low_admin/widgets/editable_user_old_service_card.dart` - 添加 locale
   参数

## 效果

完成上述修改后：

- DatePicker 将显示中文的月份名称（一月、二月等）
- 周几将显示为中文（星期一、星期二等）
- 确认/取消按钮将显示为中文
- TimePicker 的界面也将变为中文

## 验证

运行以下命令确保没有编译错误：

```bash
flutter pub get
flutter analyze
```

重新运行应用后，在用户编辑页面点击时间选择按钮，即可看到中文界面的时间选择器。

